<script type="text/javascript">
  ;(function(win, doc, $) {
    var old_scroll    = 0,
        weatherScheme = ['clear-skies', 'night'];

    function randIntInclusive(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);

      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // --- HEADER ---
    {% if is_front_page %}
    function pageTick() {
      let off = win.pageYOffset || doc.documentElement.scrollTop || doc.body.scrollTop || 0;

      if (off > ($('.header').outerHeight() / 8)) {
        $('#cat-svg').addClass('fadeout');
      } else {
        if ($('#cat-svg').hasClass('fadeout')) {
          $('#cat-svg').removeClass('fadeout');
        }
      }
    }
    {% endif %}

    // --- SCROLL HANDLING ---
    $(win).on('scroll', function (e) {
      {% if is_front_page %}pageTick();{% endif %}

      let off = win.pageYOffset || doc.documentElement.scrollTop || doc.body.scrollTop || 0;

      if (off - old_scroll > 0) {
        if (!$('.nav').hasClass('shrink') && !$('.nav').hasClass('active')) {
          $('.nav').addClass('shrink');
        }
      } else {
        if ($('.nav').hasClass('shrink')) {
          $('.nav').removeClass('shrink');
        }
      }

      old_scroll = off;
    });

    // --- NAVIGATION ---
    $('#menu-control').click(function (e) {
      if (!$('.nav').hasClass('active')) {
        if ($('.nav').hasClass('shrink')) {
          $('.nav').removeClass('shrink');
        }

        $('.nav').addClass('active');
      } else {
        $('.nav').removeClass('active');
      }

      return false;
    });

    $('body').click(function (e) {
      if (e.target.id !== 'nav' && $('#nav').children(e.target.nodeName).size() === 0) {
        if ($('.nav').hasClass('active')) {
          $('.nav').removeClass('active');
        }
      }
    });

    // Contact scroll
    $('#nav-contact').click(function (e) {
      $('html, body').animate({
        scrollTop: $('#footer').offset().top
      }, 1000);
    });

    {% if is_front_page %}
    $('#nav-about').click(function (e) {
      $('html, body').animate({
        scrollTop: $('#about').offset().top
      }, 1000);
    });

    $(doc).ready(function (e) {
      let index = randIntInclusive(0, weatherScheme.length - 1);

      $('.about').addClass(weatherScheme[index]);
    });
    {% endif %}
  }(window, document, jQuery));
</script>
